<ng-template #loading>
  <h4>{{ 'COMMON.LOADING' | translate }}</h4>
</ng-template>

<ng-container *ngIf="form != null; else loading">

  <form [formGroup]="form">
    <nb-card>
      <nb-card-header>{{ 'DISCORD.TITLE' | translate }}</nb-card-header>

      <nb-card-body>
        <div class="form-row mb-2">
          {{ 'DISCORD.CONFIGURE_DESCRIPTION' | translate }}
        </div>

        <!-- Checkboxes with inline descriptions -->
        <div class="form-row">
          <nb-checkbox formControlName="alertDiscordWatchdogEnable" class="cb-line">
            <span class="cb-title">{{ 'DISCORD.MINER_WATCHDOG' | translate }}</span>
            <span class="cb-desc">— {{ 'DISCORD.MINER_WATCHDOG_DESC' | translate }}</span>
          </nb-checkbox>
        </div>

        <div class="form-row">
          <nb-checkbox formControlName="alertDiscordBlockFoundEnable" class="cb-line">
            <span class="cb-title">{{ 'DISCORD.BLOCK_FOUND' | translate }}</span>
            <span class="cb-desc">— {{ 'DISCORD.BLOCK_FOUND_DESC' | translate }}</span>
          </nb-checkbox>
        </div>

        <div class="form-row">
          <nb-checkbox formControlName="alertDiscordBestDiffEnable" class="cb-line">
            <span class="cb-title">{{ 'DISCORD.BEST_DIFF_FOUND' | translate }}</span>
            <span class="cb-desc">— {{ 'DISCORD.BEST_DIFF_FOUND_DESC' | translate }}</span>
          </nb-checkbox>
        </div>
        <!-- Webhook -->
        <div class="form-row mt-3">
          <label for="alertDiscordWebhook" class="form-label">{{ 'DISCORD.WEBHOOK_URL' | translate }}:</label>
          <div class="form-control-wrapper">
            <input
              nbInput
              id="alertDiscordWebhook"
              type="password"
              formControlName="alertDiscordWebhook"
              placeholder="https://discord.com/api/webhooks/..."
            /><br />
            <small>{{ 'DISCORD.WEBHOOK_HELP' | translate }}</small>
          </div>
        </div>
        <div class="d-flex align-items-center justify-content-between mt-3">
          <div>
            <button nbButton size="small" (click)="sendTest()" status="info">{{ 'DISCORD.TEST' | translate }}</button>
          </div>
        </div>
        <hr class="my-4" />

        <div class="form-row mb-2">
          <strong>{{ 'DISPLAY.TITLE' | translate }}</strong>
        </div>

        <div class="form-row">
          <nb-checkbox formControlName="showBlockFoundScreenEnable" class="cb-line">
            <span class="cb-title">{{ 'DISPLAY.BLOCK_FOUND_SCREEN' | translate }}</span>
            <span class="cb-desc">— {{ 'DISPLAY.BLOCK_FOUND_SCREEN_DESC' | translate }}</span>
          </nb-checkbox>
        </div>

        <!-- Actions -->
        <div class="d-flex align-items-center justify-content-between mt-3">
          <div>
            <button nbButton size="small" (click)="save()" status="danger">{{ 'COMMON.SAVE' | translate }}</button>
          </div>
        </div>
      </nb-card-body>
    </nb-card>
  </form>
</ng-container>
